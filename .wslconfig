# ============================================
[wsl2]
############################################################
#  RESOURCE ALLOCATION
############################################################

# Custom kernel path (Windows path with double backslashes)
# Default: Microsoft's built-in kernel
# Example: Use a custom compiled Linux kernel
# kernel=C:\\WSL\\custom-kernel\\vmlinux

# Kernel modules VHD file path
# Used if you need to load custom kernel modules
# kernelModules=C:\\WSL\\kernel-modules.vhdx

# Maximum memory allocated to the WSL 2 VM
# Default: 50% of total system RAM
# Format: <value>[MB|GB]
memory=8GB

# Number of CPU cores to assign to the WSL 2 VM
# Default: all available logical processors
processors=4

# Enable Windows to reclaim unused memory from WSL VM
# Default: true
#pageReporting=true

############################################################
#  SWAP SETTINGS
############################################################

# Swap file size for the WSL 2 VM
# Default: 25% of total RAM
# Set to 0 to disable swap
#swap=8GB
swap=0

# Location of the swap file (VHD)
# Default: %Temp%\swap.vhdx
swapFile=C:\\WSL\\swap.vhdx

############################################################
#  NETWORKING
############################################################

# Allow WSL processes to be accessed via "localhost" from Windows
# Default: true
#localhostForwarding=true
localhostForwarding=true

# Networking mode: controls how WSL connects to your network
# Options:
#   NAT      - (default) WSL behind a virtual NAT switch
#   mirrored - Each distro gets its own IP on your physical network
#   none     - Networking disabled
networkingMode=NAT
#networkingMode=mirrored

# DNS proxy setting
# true = WSL uses a built-in DNS proxy for name resolution
# Default: true
dnsProxy=true

# Use virtualization-based DNS resolution
# Default: true
dnsTunneling=true

# Enable Windows firewall rules for WSL traffic
# Default: true
firewall=true

# Automatically apply Windows proxy settings to WSL
# Default: true
autoProxy=true

# Idle timeout for the WSL VM before it shuts down automatically
# Value in milliseconds (60000 = 1 minute)
vmIdleTimeout=60000

############################################################
#  FILE SYSTEM
############################################################

# Max allowed size of each distroâ€™s virtual disk
# Default: 1TB
defaultVhdSize=20GB

############################################################
#  KERNEL COMMAND LINE
############################################################

# Extra parameters passed to the Linux kernel at startup
# Example: enable debugging or networking tweaks
# kernelCommandLine=quiet splash

############################################################
#  DEBUGGING & RECOVERY
############################################################

# Safe mode: starts WSL with minimal services for troubleshooting
# Default: false
safeMode=false

# Show a debug console window displaying kernel logs (dmesg)
# Default: false
debugConsole=false

# Max number of crash dump files to keep
# Default: 10
maxCrashDumpCount=3

############################################################
#  VIRTUALIZATION
############################################################

# Allow nested virtualization (run VMs inside WSL, like Docker or KVM)
# Default: true
nestedVirtualization=true

# Enable GUI application support through WSLg
# Default: true
guiApplications=false

############################################################
#  EXPERIMENTAL FEATURES
############################################################
[experimental]

# Memory reclamation strategy:
#   dropCache = aggressively free memory
#   gradual   = slowly free memory
#   disabled  = do not reclaim memory
autoMemoryReclaim=dropCache

# Sparse VHDs are more space efficient but may fragment over time
sparseVhd=true

# When dnsTunneling=true, allow fallback parsing for unusual DNS requests
bestEffortDnsParsing=false

# Override the default IP used for DNS tunneling
# Default: 10.255.255.254
dnsTunnelingIpAddress=10.255.255.254

# How long WSL waits for Windows proxy info on startup (milliseconds)
# Default: 1000
initialAutoProxyTimeout=1000

# List of ports ignored by mirrored networking mode
# Example: ignoredPorts=22,80,443
# Default: none
# ignoredPorts=22,80,443

# Allow connecting to the host via its real IP address in mirrored mode
# Default: false
hostAddressLoopback=true
